<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Management Dashboard">
    <!-- iOS Safari specific fixes -->
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="apple-touch-fullscreen" content="yes">
    <!-- Secure Content Security Policy -->
    <!-- <meta http-equiv="Content-Security-Policy" -->
    <!-- content="default-src 'self'; script-src 'self' 'unsafe-hashes' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://www.gstatic.com; style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com; img-src 'self' data: https: https://www.darlingafrica.com https://upload.wikimedia.org https://avatars.githubusercontent.com; font-src 'self' https://cdnjs.cloudflare.com; frame-src 'none'; object-src 'none'; base-uri 'self'; form-action 'self'; upgrade-insecure-requests;"> -->
    <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' 'unsafe-hashes' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com https://www.gstatic.com https://www.gstatic.com/firebasejs/ https://market-activation-default-rtdb.firebaseio.com https://s-gke-usc1-nssi1-18.firebaseio.com;
    style-src 'self' 'unsafe-inline' https://cdn.jsdelivr.net https://cdnjs.cloudflare.com;
    img-src 'self' data: https: https://www.darlingafrica.com https://upload.wikimedia.org https://avatars.githubusercontent.com;
    font-src 'self' https://cdnjs.cloudflare.com;
    frame-src https://s-gke-usc1-nssi1-18.firebaseio.com;
    object-src 'none';
    base-uri 'self';
    form-action 'self';
    connect-src 'self'
      https://cdn.jsdelivr.net
      https://cdnjs.cloudflare.com
      https://www.gstatic.com
      https://identitytoolkit.googleapis.com
      https://*.firebaseio.com
      https://firestore.googleapis.com
      wss://*.firebaseio.com
      https://market-activation-default-rtdb.firebaseio.com;
    upgrade-insecure-requests;">

    <meta http-equiv="X-Content-Type-Options" content="nosniff">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <title>Market Activation System - Login</title>
    <link rel="icon" type="image/jpeg" href="cropped-FAV-32x32.png">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="security.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* iOS Safari and Mobile Compatibility Fixes */
        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden !important;
        }

        .main-content {
            flex: 1 1 auto;
            display: flex;
            min-height: 0;
            height: 100%;
            overflow: hidden;
        }

        .sidebar {
            height: auto;
            max-height: calc(100vh - 128px);
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
        }

        .content-area {
            flex: 1 1 auto;
            overflow-y: auto !important;
            min-height: 0;
            box-sizing: border-box;
            padding-bottom: 180px !important;
            height: 100%;
        }

        @media (max-width: 768px) {
            footer img #comlog {
                height: 22px !important;
            }

            footer span {
                font-size: 0.5rem !important;
            }

            .sidebar {
                max-height: 100vh !important;
            }
        }

        input,
        select,
        textarea,
        button {
            font-size: 16px !important;
        }

        /* iOS specific button styling */
        .btn {
            -webkit-appearance: none;
            appearance: none;
            border-radius: 8px;
        }

        /* Fix for iOS form elements */
        input[type="text"],
        input[type="email"],
        input[type="password"],
        input[type="tel"],
        input[type="number"],
        select,
        textarea {
            -webkit-appearance: none;
            appearance: none;
            -webkit-border-radius: 8px;
            border-radius: 8px;
        }

        :root {
            --primary: #4285F4;
            --secondary: #34A853;
            --accent: #EA4335;
            --light: #f8f9fa;
            --dark: #343a40;
        }

        /* Login Page Styles */
        .login-container {
            min-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            padding-bottom: 70px;
            /* extra space for footer */
            overflow-y: auto;
        }

        .login-card {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            max-width: 400px;
            width: 100%;
            animation: fadeInUp 0.6s ease-out;
            max-height: calc(100vh - 80px);
            /* 80px for footer and padding */
            overflow-y: auto;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .login-header {
            background: var(--primary);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }

        .login-header h1 {
            margin: 0;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .login-header i {
            font-size: 3rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .login-body {
            padding: 40px 30px;
        }

        .form-floating {
            margin-bottom: 20px;
        }

        .form-floating .form-control {
            border-radius: 10px;
            border: 2px solid #e1e5e9;
            height: 58px;
        }

        .form-floating .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(66, 133, 244, 0.25);
        }

        .login-btn {
            background: var(--primary);
            border: none;
            border-radius: 10px;
            padding: 15px;
            font-weight: 600;
            width: 100%;
            transition: all 0.3s;
        }

        .login-btn:hover {
            background: #3367d6;
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(66, 133, 244, 0.3);
        }

        .remember-forgot {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 20px 0;
            font-size: 0.9rem;
        }

        .forgot-password {
            color: var(--primary);
            text-decoration: none;
        }

        .forgot-password:hover {
            color: #3367d6;
            text-decoration: underline;
        }

        .demo-credentials {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
            font-size: 0.85rem;
        }

        .demo-credentials .title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .demo-credentials .credential {
            display: flex;
            justify-content: space-between;
            margin: 3px 0;
        }

        .error-message {
            color: var(--accent);
            font-size: 0.85rem;
            margin-top: 10px;
            text-align: center;
            display: none;
        }

        .success-message {
            color: var(--secondary);
            font-size: 0.85rem;
            margin-top: 10px;
            text-align: center;
            display: none;
        }

        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f5f7fa;
            color: #333;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .navbar {
            background-color: white;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--primary);
            font-size: 1.5rem;
        }

        /* Google Apps Script Mobile Device Class Override */
        .mobile-device .sidebar {
            transform: translateX(-100%) !important;
            width: 100% !important;
            max-width: 280px !important;
        }

        .mobile-device .sidebar.active {
            transform: translateX(0) !important;
        }

        .mobile-device .content-area {
            margin-left: 0 !important;
            width: 100% !important;
            padding: 10px !important;
            padding-bottom: 180px !important;
            height: calc(100vh - 60px) !important;
            overflow-y: scroll !important;
            overflow-x: auto !important;
            -webkit-overflow-scrolling: touch !important;
        }

        .mobile-device .table {
            font-size: 0.65rem !important;
        }

        .mobile-device .table th,
        .mobile-device .table td {
            font-size: 0.65rem !important;
            padding: 4px 6px !important;
        }

        .mobile-device .container-fluid {
            padding: 0 8px !important;
        }

        .mobile-device input,
        .mobile-device select,
        .mobile-device textarea {
            font-size: 16px !important;
        }

        /* Responsive CSS for mobile without class dependency */
        @media screen and (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%) !important;
                width: 100% !important;
                max-width: 280px !important;
                z-index: 1000 !important;
            }

            .sidebar.active {
                transform: translateX(0) !important;
            }

            .content-area {
                margin-left: 0 !important;
                width: 100% !important;
                padding: 10px !important;
                padding-bottom: 80px !important;
                height: calc(100vh - 60px) !important;
                overflow-y: scroll !important;
                overflow-x: auto !important;
                -webkit-overflow-scrolling: touch !important;
                position: relative !important;
            }

            .main-content {
                height: calc(100vh - 60px) !important;
                overflow: hidden !important;
            }

            .table {
                font-size: 0.7rem !important;
            }

            .table th,
            .table td {
                font-size: 0.7rem !important;
                padding: 4px 6px !important;
            }

            .container-fluid {
                padding: 0 8px !important;
            }

            /* Removed duplicate .dashboard-container here, see bottom for unified version */
        }

        .main-content {
            display: flex;
            flex: 1;
            height: calc(100vh - 70px);
            overflow: hidden;
            /* Container hides overflow, content-area scrolls */
        }

        .sidebar {
            background-color: white;
            width: 250px;
            padding: 5px 0;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.05);
            height: 100%;
            position: fixed;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            z-index: 99;
        }

        .content-area {
            flex: 1;
            padding: 20px;
            padding-bottom: 50px;
            /* Extra padding at bottom */
            margin-left: 250px;
            width: calc(100% - 250px);
            height: calc(100vh - 70px);
            /* Fixed height for scroll */
            max-height: calc(100vh - 70px);
            /* Ensure max height */
            overflow-y: scroll !important;
            /* Force vertical scrollbar */
            overflow-x: auto;
            /* Horizontal scroll when needed */
            -webkit-overflow-scrolling: touch;
        }

        .sidebar .nav-link {
            color: var(--dark);
            padding: 12px 20px;
            margin: 5px 0;
            border-radius: 8px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
        }

        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: var(--primary);
            color: white;
        }

        .sidebar .nav-link i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        .card {
            border-radius: 12px;
            border: none;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
            transition: transform 0.3s;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
        }

        .card-header {
            background-color: white;
            border-bottom: 1px solid #e0e0e0;
            font-weight: 600;
            padding: 15px 20px;
            border-radius: 12px 12px 0 0 !important;
        }

        .stat-card {
            text-align: center;
            padding: 20px;
        }

        .stat-card .value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }

        .stat-card .label {
            color: #6c757d;
            font-size: 0.9rem;
        }

        .table-responsive {
            overflow-x: auto;
        }

        .table th {
            background-color: var(--light);
            font-weight: 600;
            white-space: nowrap;
        }

        .form-section {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .form-control,
        .form-select {
            border-radius: 8px;
            padding: 10px 15px;
            border: 1px solid #e0e0e0;
        }

        .btn-primary {
            background-color: var(--primary);
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
        }

        .btn-primary:hover {
            background-color: #3367d6;
        }

        .location-badge {
            background-color: #e8f0fe;
            color: var(--primary);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            display: inline-block;
            margin-right: 5px;
            margin-bottom: 5px;
            white-space: nowrap;
        }

        .dashboard-section {
            margin-bottom: 30px;
        }

        .section-title {
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-weight: 600;
            color: var(--dark);
        }

        .stylist-code {
            font-family: monospace;
            background-color: #f1f3f4;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Enhanced table styling */
        .table th {
            cursor: pointer;
            user-select: none;
            position: relative;
        }

        .table th:hover {
            background-color: #f8f9fa;
        }

        .table th i.fas {
            font-size: 0.7rem;
            margin-left: 5px;
            opacity: 0.6;
        }

        .btn-group .btn {
            padding: 0.25rem 0.4rem;
        }

        .stat-card {
            border: none;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: transform 0.2s;
        }

        .stat-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.12);
        }

        .stat-card .card-body {
            padding: 1.5rem;
            text-align: center;
        }

        .stat-card .value {
            font-size: 1.8rem;
            font-weight: 700;
            margin: 0.5rem 0;
        }

        .stat-card .label {
            color: #6c757d;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .table-dark th {
            background-color: var(--dark) !important;
            color: white !important;
            border-color: var(--dark) !important;
        }

        /* Enhanced form styling */
        .form-section .card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .form-section .card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1) !important;
        }

        .card-header.bg-gradient {
            border: none;
            position: relative;
            overflow: hidden;
        }

        .card-header.bg-gradient::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .card-header.bg-gradient:hover::before {
            left: 100%;
        }

        .form-control:focus,
        .form-select:focus {
            border-color: #667eea;
            box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }

        .btn-lg {
            padding: 0.75rem 2rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .section-title {
            position: relative;
            padding-left: 20px;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, var(--primary), #667eea);
            border-radius: 2px;
        }

        .mobile-menu-btn {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            color: var(--primary);
        }

        .sidebar-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 98;
        }

        /* Responsive adjustments */
        @media (max-width: 992px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
                z-index: 101;
            }

            .sidebar.active {
                transform: translateX(0);
            }

            .content-area {
                margin-left: 0;
                width: 100%;
            }

            .mobile-menu-btn {
                display: block;
            }

            .sidebar-overlay.active {
                display: block;
            }

            .table th,
            .table td {
                padding: 8px 10px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 768px) {
            .content-area {
                padding: 12px;
            }

            .form-section {
                padding: 18px;
                margin-bottom: 20px;
            }

            .stat-card .value {
                font-size: 1.4rem;
            }

            .card-header {
                padding: 12px 15px;
                font-size: 0.95rem;
            }

            /* Tablet table adjustments */
            .table th,
            .table td {
                padding: 8px 10px;
                font-size: 0.85rem;
            }

            /* Tablet form adjustments */
            .form-control,
            .form-select {
                font-size: 16px;
                padding: 10px 12px;
            }

            /* Tablet button adjustments */
            .btn {
                padding: 10px 16px;
                font-size: 0.9rem;
            }

            /* Mobile charts */
            .chart-container {
                height: 250px !important;
                margin-bottom: 20px;
            }

            /* Mobile modal adjustments */
            .modal-dialog {
                margin: 10px;
                max-width: calc(100% - 20px);
            }
        }

        @media (max-width: 576px) {
            .content-area {
                padding: 8px;
            }

            .form-section {
                padding: 12px;
            }

            /* Mobile table responsiveness */
            .table-responsive {
                font-size: 0.75rem;
                border-radius: 8px;
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
            }

            .table th,
            .table td {
                padding: 6px 8px;
                font-size: 0.75rem;
                white-space: nowrap;
                min-width: 80px;
            }

            /* Mobile cards */
            .card {
                margin-bottom: 15px;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            }

            .card-header {
                padding: 10px 12px;
                font-size: 0.9rem;
            }

            /* Mobile stats cards */
            .stat-card {
                padding: 15px;
                text-align: center;
            }

            .stat-card .value {
                font-size: 1.3rem;
                margin: 8px 0;
            }

            .stat-card .label {
                font-size: 0.8rem;
            }

            /* Mobile forms */
            .form-control,
            .form-select {
                font-size: 16px;
                /* Prevents zoom on iOS */
                padding: 12px 15px;
            }

            .btn {
                padding: 12px 20px;
                font-size: 0.9rem;
            }

            /* Mobile buttons */
            .btn-sm {
                padding: 8px 12px;
                font-size: 0.75rem;
            }

            /* Mobile sidebar */
            .sidebar {
                width: 280px;
                box-shadow: 2px 0 20px rgba(0, 0, 0, 0.3);
            }

            /* Mobile header */
            .header {
                padding: 10px 15px;
            }

            /* Mobile navigation */
            .nav-link {
                padding: 12px 15px;
                font-size: 0.9rem;
            }

            /* Critical mobile viewport fixes */
            body {
                overflow-x: hidden !important;
            }

            /* Mobile input zoom prevention */
            input,
            select,
            textarea {
                font-size: 16px !important;
                -webkit-appearance: none;
                appearance: none;
                transform: scale(1);
            }

            /* Touch-friendly interactions */
            .btn,
            .form-control,
            .nav-link {
                min-height: 44px;
                touch-action: manipulation;
            }

            /* Mobile grid responsiveness */
            .container-fluid {
                padding: 0 8px;
            }

            .row {
                margin-left: -5px;
                margin-right: -5px;
            }

            .col-lg-3,
            .col-md-6,
            .col-12 {
                padding-left: 5px;
                padding-right: 5px;
                margin-bottom: 10px;
            }

            /* Mobile table improvements */
            .table {
                font-size: 0.7rem !important;
            }

            .table th,
            .table td {
                font-size: 0.7rem !important;
                padding: 4px 6px !important;
                white-space: nowrap;
            }
        }

        /* Extra small devices (360px and below) */
        @media (max-width: 360px) {
            .content-area {
                padding: 5px !important;
            }

            .card-header {
                font-size: 0.8rem !important;
                padding: 8px 10px !important;
            }

            .table th,
            .table td {
                font-size: 0.65rem !important;
                padding: 3px 4px !important;
                min-width: 50px !important;
            }

            .stat-card .value {
                font-size: 1.1rem !important;
            }

            .form-section {
                padding: 8px !important;
                margin-bottom: 10px !important;
            }

            .btn {
                font-size: 0.8rem !important;
                padding: 8px 12px !important;
            }
        }

        .table-responsive {
            font-size: 0.85rem;
        }

        .btn {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        #stylistsTable th {
            align-content: center;
            text-align: center;
            white-space: nowrap;
        }

        /* Developer Profile Card Styles */
        .developer-text {
            position: relative;
            display: inline-block;
            cursor: pointer;
            color: #0d6efd;
            text-decoration: none;
            transition: color 0.3s;
        }

        .developer-text:hover {
            color: #0a58ca;
            text-decoration: underline;
        }

        .developer-card {
            position: absolute;
            bottom: 100%;
            right: 0;
            width: 280px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(10px);
            transition: all 0.3s ease;
            z-index: 9999;
            margin-bottom: 10px;
        }

        .developer-text:hover .developer-card {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .developer-card::after {
            content: '';
            position: absolute;
            bottom: -8px;
            right: 20px;
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid #764ba2;
        }

        .developer-card .dev-photo {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            border: 0px solid yellow;
            object-fit: inherit;
            margin: 0 auto 15px;
            display: block;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .developer-card .dev-name {
            color: #fff;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 5px;
            text-align: center;
        }

        .developer-card .dev-role {
            color: rgba(255, 255, 255, 0.85);
            font-size: 13px;
            margin-bottom: 10px;
            text-align: center;
        }

        .developer-card .dev-company {
            color: #fff;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 12px;
            text-align: center;
        }

        .developer-card .dev-contact {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-top: 10px;
        }

        .developer-card .dev-contact a {
            width: 32px;
            height: 32px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            text-decoration: none;
            transition: all 0.3s;
        }

        .developer-card .dev-contact a:hover {
            background: rgba(255, 255, 255, 0.4);
            transform: scale(1.1);
        }

        .developer-card .dev-details {
            margin-top: 12px;
            padding-top: 12px;
            border-top: 1px solid rgba(255, 255, 255, 0.3);
        }

        .developer-card .dev-details .detail-item {
            display: flex;
            align-items: center;
            padding: 5px;
            height: 25px;
            gap: 8px;
            color: rgba(255, 255, 255, 0.95);
            font-size: 14px;
            margin-bottom: 6px;
            text-align: left;
        }

        .developer-card .dev-details .detail-item i {
            width: 16px;
            text-align: center;
            color: #ffd700;
        }

        .developer-card .dev-details .detail-item a {
            color: rgba(255, 255, 255, 0.95);
            text-decoration: none;
        }

        .developer-card .dev-details .detail-item a:hover {
            color: #fff;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <!-- Security Shield Indicator -->
    <!-- <div id="securityShield" class="security-shield">
        <i class="fas fa-shield-alt"></i> Protected
    </div> -->

    <!-- Login Page -->
    <div id="loginPage" class="login-container" style="display: flex;">
        <div class="login-card">
            <div class="login-header">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/97/Godrej_Logo.svg/1200px-Godrej_Logo.svg.png"
                    alt="Company Logo" style="height: 30px; margin-bottom: 10px;">
                <h1>Market Activation System</h1>
                <p class="mb-0">Secure Access Portal</p>
            </div>
            <div class="login-body">
                <!-- Login Form -->
                <form id="loginForm">
                    <div class="form-floating mb-3">
                        <input type="text" class="form-control" id="username" placeholder="Username" required>
                        <label for="username"><i class="fas fa-user me-2"></i>Username</label>
                    </div>

                    <div class="form-floating mb-3 position-relative">
                        <input type="password" class="form-control" id="password"
                            placeholder="Password minimum 6 characters" required style="padding-right: 45px;">
                        <label for="password"><i class="fas fa-lock me-2"></i>Password</label>
                        <i class="fas fa-eye position-absolute" id="toggleLoginPassword"
                            style="right: 15px; top: 50%; transform: translateY(-50%); color: #6c757d; cursor: pointer; z-index: 10; font-size: 16px;"></i>
                    </div>

                    <div class="form-check mb-3">
                        <input type="checkbox" class="form-check-input" id="rememberMe">
                        <label class="form-check-label" for="rememberMe">
                            Remember me
                        </label>
                    </div>

                    <button type="submit" class="btn btn-primary login-btn">
                        <i class="fas fa-sign-in-alt me-2"></i>Login
                    </button>
                </form>

                <!-- Error/Success Messages -->
                <div class="error-message" id="errorMessage">
                    <i class="fas fa-exclamation-circle me-2"></i>
                    <span id="errorText"></span>
                </div>

                <div class="success-message" id="successMessage">
                    <i class="fas fa-check-circle me-2"></i>
                    <span id="successText"></span>
                </div>

                <!-- Access Level Info -->
                <div class="access-info mt-3">
                    <small class="text-muted d-block text-center">
                        <i class="fas fa-shield-alt me-1"></i>
                        Contact administrator for access credentials
                    </small>
                </div>

                <!-- reCAPTCHA Container (hidden, used for OTP verification) -->
                <div id="recaptcha-container" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Main Dashboard (Hidden Initially) -->
    <div id="mainDashboard" class="dashboard-container" style="display: none;">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="container-fluid">
                <button class="mobile-menu-btn" id="mobileMenuBtn">
                    <i class="fas fa-bars"></i>
                </button>
                <a class="navbar-brand" href="#">
                    <img src="darling_line.jpeg" alt="Logo" style="height: 30px; margin-right: 10px;"><br>
                    Market Activation System
                </a>
                <div class="d-flex align-items-center">
                    <span class="text-muted me-3">Welcome, <span id="currentUser">Admin</span></span>
                    <button class="btn btn-outline-primary btn-sm" id="logoutBtn">
                        <i class="fas fa-sign-out-alt me-1"></i>Logout
                    </button>
                </div>
            </div>
        </nav>

        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar" id="sidebar">
                <ul class="nav flex-column">
                    <li class="nav-item">
                        <a class="nav-link active" href="#dashboard">
                            <i class="fas fa-tachometer-alt"></i> Dashboard
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#register-stylist">
                            <i class="fas fa-user-plus"></i> Register Stylist
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#braiding-form">
                            <i class="fas fa-cut"></i> Braiding Form
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#stylists">
                            <i class="fas fa-users"></i> Stylists
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#customers">
                            <i class="fas fa-user-friends"></i> Customers
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#payment-request">
                            <i class="fas fa-hand-holding-usd"></i> Bank Payment Upload Format
                        </a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="#payments">
                            <i class="fas fa-money-bill-wave"></i> Payment Proof CSV Upload
                        </a>
                    </li>

                    <li class="nav-item d-none">
                        <a class="nav-link" href="#reports">
                            <i class="fas fa-chart-bar"></i> Reports
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#user-management">
                            <i class="fas fa-user-cog"></i> User Management
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#settings">
                            <i class="fas fa-cog"></i> Settings
                        </a>
                    </li>
                </ul>
            </div>

            <!-- Sidebar overlay for mobile -->
            <div class="sidebar-overlay" id="sidebarOverlay"></div>

            <!-- Content Area -->
            <div class="content-area">
                <!-- Dashboard Section -->
                <div id="dashboard" class="dashboard-section" style="display: block;">
                    <h2 class="section-title">Management Dashboard</h2>

                    <!-- Stats Cards -->
                    <div class="row g-3">
                        <div class="col-md-3 col-sm-6">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-users fa-2x text-primary"></i>
                                    <div class="value">0</div>
                                    <div class="label">Stylists Registered</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-cut fa-2x text-success"></i>
                                    <div class="value">0</div>
                                    <div class="label">Braiding Completed</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-money-bill-wave fa-2x text-warning"></i>
                                    <div class="value">₦0</div>
                                    <div class="label">Total Payment</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3 col-sm-6">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-clock fa-2x text-danger"></i>
                                    <div class="value">₦0</div>
                                    <div class="label">Payment Pending</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Location Summary Table -->
                    <div class="card mt-4">
                        <div class="card-header">
                            <i class="fas fa-map-marker-alt me-2"></i> Location Summary
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="locationSummary">
                                    <thead>
                                        <tr>
                                            <th>Location</th>
                                            <th>Stylists Registered</th>
                                            <th>Braiding Completed</th>
                                            <th>No. of Days</th>
                                            <th>Total Payment</th>
                                            <th>Payment Done</th>
                                            <th>Payment Pending</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">
                                                <i class="fas fa-spinner fa-spin"></i> Loading location data from
                                                Firebase...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Charts -->
                    <div class="row mt-4 g-3">
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-pie me-2"></i> Braiding Distribution by Location
                                </div>
                                <div class="card-body">
                                    <canvas id="locationChart" height="312"
                                        style="display: block; box-sizing: border-box; height: 250px; width: 575.4px;"
                                        width="719"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-2"></i> Daily Braiding Progress
                                </div>
                                <div class="card-body">
                                    <canvas id="dailyChart" height="312" width="719"
                                        style="display: block; box-sizing: border-box; height: 250px; width: 575.4px;"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Register Stylist Form -->
                <div id="register-stylist" class="form-section" style="display: none;">
                    <h2 class="section-title">Register Stylist</h2>
                    <p class="text-muted mb-4">Register stylist with their basic details and assign a unique code</p>

                    <form id="stylistForm" autocomplete="off">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="stylistName" class="form-label">Stylist Name</label>
                                    <input type="text" class="form-control" name="stylistName" id="stylistName" required
                                        pattern="[A-Za-z ]+" title="Only alphabets and spaces allowed">
                                    <span><small id="stlnamemsg" class="d-none text-danger"></small></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="phoneNumber" class="form-label">Phone Number</label>
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="col">
                                            <input type="tel" class="form-control" name="phoneNumber" id="phoneNumber"
                                                required pattern="0[789][0-9]{9}" maxlength="11" minlength="11"
                                                title="Mobile number must be exactly 11 digits and start with 07, 08, or 09"
                                                placeholder="Must start with 07, 08, or 09">
                                            <span><small id="stlphonmsg" class="d-none text-danger"></small>
                                        </div>
                                        </span><span id="phoneLoader" style="display:none;font-size:1.1em;">⏳</span>
                                    </div>

                                    <!-- OTP functionality disabled for testing -->
                                    <!-- <div id="stylistOTPSection" class="mt-3" style="display: none;"> ... </div> -->

                                    <!-- Phone verification disabled -->
                                    <!-- <div id="stylistPhoneVerified" class="mt-2" style="display: none;"> ... </div> -->
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="stylistLocation" class="form-label">Stylist Location</label>
                                    <input type="text" class="form-control" name="stylistLocation" id="stylistLocation"
                                        required list="stylistLocationDatalist"
                                        placeholder="Select location from list (required)">
                                    <span><small id="stllocmsg" class="d-none text-danger"></small></span>
                                    <datalist id="stylistLocationDatalist">
                                        <option value="AKURE"></option>
                                        <option value="ONDA"></option>
                                        <option value="ADO-EKITI"></option>
                                        <option value="ILORIN"></option>
                                        <option value="OSOGBO"></option>
                                    </datalist>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="stylistCode" class="form-label">Stylist Code</label>
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="col">
                                            <input type="text" class="form-control" name="stylistCode" id="stylistCode"
                                                required pattern="[A-Za-z][0-9]{3}" maxlength="4" minlength="4"
                                                title="First letter, then 3 digits (e.g. A001)"
                                                placeholder="e.g. A001 (required)">
                                            <span><small id="stlcodemsg" class="d-none text-danger"></small></span>
                                        </div>
                                        <span id="stylistCodeLoader" style="display:none;font-size:1.1em;">⏳</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bankName" class="form-label">Bank Name</label>
                                    <input type="text" class="form-control" placeholder="eg. UBA, GTB, OPay etc."
                                        name="bankName" id="bankName" required pattern="[A-Za-z ]+"
                                        title="Only alphabets and spaces allowed">
                                    <span><small id="stlbankNamemsg" class="d-none text-danger"></small></span>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="bankAccountNumber" class="form-label">Bank Account Number</label>
                                    <div class="d-flex align-items-center gap-2">
                                        <div class="col">
                                            <input type="text" class="form-control" name="bankAccountNumber"
                                                id="bankAccountNumber" required pattern="[0-9]{10}" maxlength="10"
                                                minlength="10" title="Account number must be exactly 10 digits"
                                                placeholder="Enter 10 digit account number (required)">
                                            <span><small id="stlbankAccountNumbermsg"
                                                    class="d-none text-danger"></small></span>
                                        </div>
                                        <span id="bankLoader" style="display:none;font-size:1.1em;">⏳</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-12">
                                <div class="mb-3">
                                    <label for="beneficiaryName" class="form-label">Beneficiary Name</label>
                                    <input type="text" class="form-control" name="beneficiaryName" id="beneficiaryName"
                                        required placeholder="Exact Name in Bank (required)">
                                    <span><small id="stlbeneficiaryNamemsg" class="d-none text-danger"></small></span>
                                </div>
                            </div>
                        </div>

                        <!-- Personal Data Agreement Checkbox -->
                        <div class="row">
                            <div class="col-12">
                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" name="dataAgreement"
                                        id="stylistDataAgreement" required>
                                    <label class="form-check-label" for="stylistDataAgreement">
                                        <strong>I agree to carry and process my personal data</strong> for registration
                                        and service purposes.
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="form-text text-muted">
                                        Your personal data will be used for stylist verification, payment processing,
                                        and service management.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex gap-2 flex-wrap mt-4">
                            <button type="submit" class="btn btn-primary" id="registerStylistBtn">Register
                                Stylist</button>
                            <button type="reset" class="btn btn-outline-secondary">Clear Form</button>
                        </div>
                    </form>

                    <div id="stylistResult" class="mt-3" style="display: none;">
                        <div class="alert" role="alert"></div>
                        <!-- Success Modal for Stylist Registration -->
                        <div class="modal fade" id="stylistSuccessModal" tabindex="-1"
                            aria-labelledby="stylistSuccessModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="stylistSuccessModalLabel">Success</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        Stylist registered successfully!
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary"
                                            data-bs-dismiss="modal">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Braiding Completion Form -->
                <div id="braiding-form" class="form-section" style="display: none;">
                    <h2 class="section-title">Customer Registration</h2>
                    <p class="text-muted mb-4">Register new customers for branding activation and track their details
                    </p>

                    <form id="geoForm" autocomplete="off">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerStylishCode" class="form-label">Stylish Code</label>
                                    <input type="text" name="stylishCode" class="form-control" required
                                        list="stylishCodeDatalist" id="customerStylishCodeInput"
                                        placeholder="Select code from list (required)">
                                    <span><small id="cstcodemsg" class="d-none text-danger"></small></span>
                                    <datalist id="stylishCodeDatalist"></datalist>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerStylishName" class="form-label">Stylish Name</label>
                                    <input type="text" name="stylishName" class="form-control" required
                                        pattern="[A-Za-z ]+" title="Only alphabets and spaces allowed" readonly>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerStylistLocation" class="form-label">Stylist Location</label>
                                    <input type="text" name="customerstylistLocation" id="customerStylistLocation"
                                        class="form-control" required list="customerLocationDatalist" readonly>
                                    <datalist id="customerLocationDatalist"></datalist>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerTokenNo" class="form-label">Token No.</label>
                                    <input type="text" name="customerTokenNo" class="form-control" id="customerTokenNo"
                                        pattern="[A-Za-z0-9-]+" title="Only letters, numbers and hyphens allowed"
                                        placeholder="Enter token number (required)" required>
                                    <span><small id="csttoknmsg" class="d-none text-danger"></small></span>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6 d-none">
                                <div class="mb-3">
                                    <label for="customerNumber" class="form-label">Customer Mobile Number <span
                                            class="text-muted">(Optional)</span></label>
                                    <input type="tel" name="customerNumber" class="form-control" inputmode="numeric"
                                        placeholder="Optional mobile number (07xxxxxxxxx, 08xxxxxxxxx, 09xxxxxxxxx)"
                                        maxlength="11" pattern="0[789][0-9]{9}"
                                        title="Mobile number must start with 07, 08, or 09">
                                    <span><small id="cstmobnmsg" class="d-none text-danger"></small></span>

                                    <!-- OTP functionality disabled for testing -->
                                    <!-- <div id="customerOTPSection" class="mt-3" style="display: none;"> ... </div> -->

                                    <!-- Phone verification disabled -->
                                    <!-- <div id="customerPhoneVerified" class="mt-2" style="display: none;"> ... </div> -->
                                </div>
                            </div>
                            <div class="col-md-6 d-none">
                                <div class="mb-3">
                                    <label for="customerName" class="form-label">Customer Name</label>
                                    <input type="text" name="customerName" class="form-control" pattern="[A-Za-z ]+"
                                        title="Only alphabets and spaces allowed">
                                    <span><small id="cstnamemsg" class="d-none text-danger"></small></span>
                                </div>
                            </div>
                        </div>

                        <div class="row g-3 d-none">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerEmail" class="form-label">Email (Optional)</label>
                                    <input type="email" name="customerEmail" class="form-control"
                                        placeholder="customer@example.com">
                                </div>
                            </div>
                        </div>

                        <input type="hidden" name="timestamp" id="customerTimestamp">
                        <input type="hidden" name="geoLocation" id="customerGeoLocation">

                        <!-- Personal Data Agreement Checkbox -->
                        <div class="row g-3 d-none">
                            <div class="col-12 mt-3">
                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" name="dataAgreement"
                                        id="customerDataAgreement">
                                    <label class="form-check-label" for="customerDataAgreement">
                                        <strong>I agree to carry and process my personal data</strong> for service
                                        registration purposes.
                                        <span class="text-danger">*</span>
                                    </label>
                                    <div class="form-text text-muted">
                                        Your personal data will be used only for service management and will be kept
                                        secure.
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="d-flex gap-2 flex-wrap mt-4">
                            <button type="submit" class="btn btn-primary" id="registerCustomerBtn">
                                Register Customer
                            </button>
                            <button type="reset" class="btn btn-outline-secondary">Clear Form</button>
                        </div>
                    </form>

                    <div id="customerResult" class="mt-3" style="display: none;">
                        <div class="alert" role="alert"></div>
                        <!-- Success Modal for Customer Registration -->
                        <div class="modal fade" id="customerSuccessModal" tabindex="-1"
                            aria-labelledby="customerSuccessModalLabel" aria-hidden="true">
                            <div class="modal-dialog modal-dialog-centered">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="customerSuccessModalLabel">Success</h5>
                                        <button type="button" class="btn-close" data-bs-dismiss="modal"
                                            aria-label="Close"></button>
                                    </div>
                                    <div class="modal-body">
                                        Customer registered successfully!
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-primary"
                                            data-bs-dismiss="modal">OK</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="stylists" class="dashboard-section" style="display: none;">
                    <h2 class="section-title">Registered Stylists</h2>

                    <!-- Statistics Cards -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-users fa-lg text-primary"></i>
                                    <div class="value text-primary" id="totalStylists">0</div>
                                    <div class="label">Total Stylists</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-user-check fa-lg text-success"></i>
                                    <div class="value text-success" id="activeStylists">0</div>
                                    <div class="label">Active Stylists</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-map-marker-alt fa-lg text-info"></i>
                                    <div class="value text-info" id="totalLocations">0</div>
                                    <div class="label">Locations</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-calendar-plus fa-lg text-warning"></i>
                                    <div class="value text-warning" id="newStylists">0</div>
                                    <div class="label">This Month</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="fas fa-users me-2"></i> Stylists Directory
                                </div>
                                <!-- <div class="d-flex gap-2">
                                    <button class="btn btn-outline-primary btn-sm" id="refreshStylistsBtn">
                                        <i class="fas fa-refresh"></i> Refresh
                                    </button>
                                    <button class="btn btn-primary btn-sm" id="exportStylistsBtn">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div> -->
                            </div>
                            <!-- Search and Filter Bar -->
                            <div class="mt-3">
                                <div class="row g-2  d-flex justify-content-between align-items-center">
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="stylistSearch"
                                                placeholder="Search stylists Name / code / mobile...">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="locationFilter">
                                            <option value="">All Locations</option>
                                            <option value="AKURE">AKURE</option>
                                            <option value="ONDA">ONDA</option>
                                            <option value="ADO-EKITI">ADO-EKITI
                                            </option>
                                            <option value="ILORIN">ILORIN</option>
                                            <option value="OSOGBO">OSOGBO</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-calendar"></i>
                                            </span>
                                            <input type="date" class="form-control" id="stylistDateFilter"
                                                title="Filter by registration date">
                                        </div>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-outline-secondary w-100" id="clearStylistFiltersBtn">
                                            <i class="fas fa-times"></i> Clear
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="stylistsTable">
                                    <thead class="table-dark">
                                        <tr>
                                            <th id="sCode">Stylist Code <i class="fas fa-sort"></i></th>
                                            <th id="sName">Name <i class="fas fa-sort"></i></th>
                                            <th id="sPhone">Phone <i class="fas fa-sort"></i></th>
                                            <th id="sLocation">Location <i class="fas fa-sort"></i></th>
                                            <th id="sRegistrationDate">Registration Date <i class="fas fa-sort"></i>
                                            </th>
                                            <th id="sBankDetails">Bank Details <i class="fas fa-sort"></i></th>
                                            <th id="sBalanceAmount">Balance Amount <i class="fas fa-sort"></i></th>
                                            <th id="sTotalAmount" class="p-1">Total Amount <i
                                                    class="fas fa-sort"></i><br><small style="font-size: 8px;">(Paid +
                                                    Unpaid)</small></th>
                                            <!-- <th>Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody id="stylistsTableBody">
                                        <tr>
                                            <td colspan="8" class="text-center text-muted">Loading stylists from
                                                Firebase...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="payments" class="dashboard-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="section-title">Payment Proof CSV Upload</h2>
                        <button id="uploadCSV" class="btn btn-info me-2">
                            <i class="fas fa-file-upload me-2"></i>Upload CSV
                        </button>
                    </div>

                    <!-- CSV Upload Modal -->
                    <div class="modal fade" id="csvUploadModal" tabindex="-1">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h5 class="modal-title">Upload CSV Payment Data</h5>
                                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                                </div>
                                <div class="modal-body">
                                    <div class="mb-3">
                                        <label for="csvFile" class="form-label">Select CSV File</label>
                                        <input type="file" class="form-control" id="csvFile" accept=".csv" required>
                                        <div class="form-text">CSV should contain columns: Beneficiary Name,
                                            Bank Code, Account Number, Amount, Narration (Transaction_ID)</div>
                                        <div class="form-text mt-2"><strong>Note:</strong> This will update payment
                                            statuses in the backend database by matching Customer IDs.</div>
                                    </div>
                                    <div id="csvPreview" class="mt-3" style="display: none;">
                                        <h6>Preview (first 5 rows):</h6>
                                        <div class="table-responsive">
                                            <table class="table table-sm table-bordered">
                                                <thead id="csvPreviewHeader"></thead>
                                                <tbody id="csvPreviewBody"></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary"
                                        data-bs-dismiss="modal">Cancel</button>
                                    <button type="button" class="btn btn-primary" id="uploadCSVData" disabled>Update
                                        Payment Status</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-money-bill-wave fa-lg text-success"></i>
                                    <div class="value text-success" id="totalPaid">₦0</div>
                                    <div class="label">Total Paid</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-clock fa-lg text-warning"></i>
                                    <div class="value text-warning" id="totalPending">₦0</div>
                                    <div class="label">To Be Paid</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-percentage fa-lg text-info"></i>
                                    <div class="value text-info" id="paymentRate">0%</div>
                                    <div class="label">Payment Rate</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-calendar-day fa-lg text-primary"></i>
                                    <div class="value text-primary" id="thisMonthPaid">₦0</div>
                                    <div class="label">This Month</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <i class="fas fa-receipt me-2"></i> Recent Payment Transactions
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Stylist</th>
                                            <th>Client</th>
                                            <th>Service</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                            <th>Payment Date</th>
                                        </tr>
                                    </thead>
                                    <tbody id="paymentsTableBody">
                                        <tr>
                                            <td colspan="7" class="text-center text-muted">Loading payment records...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Payment Request Section -->
                <div id="payment-request" class="dashboard-section" style="display: none;">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <h2 class="section-title">Bank Payment Upload Format</h2>
                        <div>
                            <button id="exportPaymentRequests" class="btn btn-success me-2">
                                <i class="fas fa-file-export me-2"></i>Export
                            </button>
                            <button id="refreshPaymentRequestsData" class="btn btn-outline-primary">
                                <i class="fas fa-sync-alt me-1"></i>Refresh
                            </button>
                        </div>
                    </div>

                    <!-- Payment Requests Statistics -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-clock fa-lg text-warning"></i>
                                    <div class="value text-warning" id="totalPendingRequests">0</div>
                                    <div class="label">Pending Requests</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-money-bill-wave fa-lg text-success"></i>
                                    <div class="value text-success" id="totalPendingAmount">₦0</div>
                                    <div class="label">Total Pending Amount</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-university fa-lg text-info"></i>
                                    <div class="value text-info" id="uniqueBanks">0</div>
                                    <div class="label">Unique Banks</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-users fa-lg text-primary"></i>
                                    <div class="value text-primary" id="uniqueBeneficiaries">0</div>
                                    <div class="label">Unique Beneficiaries</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filter Controls -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <h5 class="mb-0">Filter Payment Requests</h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-5">
                                    <label class="form-label">Search by customer Name/Beneficiary Name</label>
                                    <input type="text" id="paymentSearchInput" class="form-control"
                                        placeholder="Search customer name or beneficiary name...">
                                </div>
                                <div class="col-md-5">
                                    <label class="form-label">Bank</label>
                                    <select id="paymentBankFilter" class="form-control">
                                        <option value="">All Banks</option>
                                    </select>
                                </div>
                                <div class="col-md-3 d-none">
                                    <label class="form-label">Amount Range</label>
                                    <select id="paymentAmountFilter" class="form-control">
                                        <option value="">All Amounts</option>
                                        <option value="0-1000">₦0 - ₦1,000</option>
                                        <option value="1000-5000">₦1,000 - ₦5,000</option>
                                        <option value="5000-10000">₦5,000 - ₦10,000</option>
                                        <option value="10000+">₦10,000+</option>
                                    </select>
                                </div>
                                <div class="col-md-2 d-none">
                                    <label class="form-label">Status</label>
                                    <select id="paymentStatusFilter" class="form-control">
                                        <option value="pending" selected>Pending</option>
                                        <option value="">All Status</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Payment Requests Table -->
                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h5 class="mb-0">Payment Requests Data</h5>
                            <span class="badge bg-primary" id="paymentRequestCount">0 records</span>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-striped table-hover">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Beneficiary Name</th>
                                            <th>Bank Code</th>
                                            <th>Account Number</th>
                                            <th>Amount</th>
                                            <th>Narration (Transaction_ID)</th>
                                            <th>Status</th>
                                            <!-- <th>Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody id="paymentRequestsDataBody">
                                        <tr>
                                            <td colspan="7" class="text-center py-4">
                                                <i class="fas fa-spinner fa-spin me-2"></i>Loading payment requests...
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div id="paymentPagination" class="d-flex justify-content-center mt-3"></div>
                        </div>
                    </div>
                </div>

                <div id="reports" class="dashboard-section" style="display: none;">
                    <h2 class="section-title">Reports & Analytics</h2>

                    <div class="row g-3">
                        <div class="col-lg-8">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-chart-line me-2"></i> Revenue Trends
                                </div>
                                <div class="card-body">
                                    <canvas id="revenueChart" height="300"></canvas>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-star me-2"></i> Top Performing Stylists
                                </div>
                                <div class="card-body">
                                    <div id="topStylists">
                                        <div class="text-center text-muted py-4">
                                            No performance data available
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Customer Data Section -->
                <div id="customers" class="dashboard-section" style="display: none;">
                    <h2 class="section-title">Customer Data</h2>

                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-users fa-lg text-primary"></i>
                                    <div class="value text-primary" id="totalCustomers">0</div>
                                    <div class="label">Total Customers</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-calendar-day fa-lg text-success"></i>
                                    <div class="value text-success" id="todayCustomers">0</div>
                                    <div class="label">Today's Registrations</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-chart-line fa-lg text-info"></i>
                                    <div class="value text-info" id="weeklyCustomers">0</div>
                                    <div class="label">This Week</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-calendar-alt fa-lg text-warning"></i>
                                    <div class="value text-warning" id="monthlyCustomers">0</div>
                                    <div class="label">This Month</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div>
                                    <i class="fas fa-users me-2"></i> Customer Directory
                                </div>
                                <!-- <div class="d-flex gap-2">
                                    <button class="btn btn-outline-primary btn-sm" id="refreshCustomersBtn">
                                        <i class="fas fa-refresh"></i> Refresh
                                    </button>
                                    <button class="btn btn-primary btn-sm" id="exportCustomersBtn">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div> -->
                            </div>
                            <!-- Search and Filter Bar -->
                            <div class="mt-3">
                                <div class="row g-2">
                                    <div class="col-md-3">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-search"></i>
                                            </span>
                                            <input type="text" class="form-control" id="customerSearch"
                                                placeholder="Search customers...">
                                        </div>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="customerLocationFilter">
                                            <option value="">All Locations</option>
                                            <option value="AKURE">AKURE</option>
                                            <option value="ONDA">ONDA</option>
                                            <option value="ADO-EKITI">ADO-EKITI
                                            </option>
                                            <option value="ILORIN">ILORIN</option>
                                            <option value="OSOGBO">OSOGBO</option>
                                        </select>
                                    </div>
                                    <div class="col-md-3">
                                        <select class="form-select" id="customerStylistFilter">
                                            <option value="">All Stylists</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <div class="input-group">
                                            <span class="input-group-text">
                                                <i class="fas fa-calendar-day"></i>
                                            </span>
                                            <input type="date" class="form-control" id="customerDate">
                                        </div>
                                    </div>
                                    <div class="col-md-1">
                                        <button class="btn btn-outline-secondary w-100" id="clearCustomerFiltersBtn">
                                            <i class="fas fa-times"></i> Clear
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="customersTable">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Token</th>
                                            <th>Customer Details</th>
                                            <th>Contact</th>
                                            <th>Stylist</th>
                                            <th>Registration</th>
                                            <th>Payment</th>
                                            <th>Account Details</th>
                                            <th>Payment Status</th>
                                            <!-- <th>Actions</th> -->
                                        </tr>
                                    </thead>
                                    <tbody id="customersTableBody">
                                        <tr>
                                            <td colspan="8" class="text-center text-muted">Loading customers...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="user-management" class="dashboard-section" style="display: none;">
                    <h2 class="section-title">User Management</h2>
                    <p class="text-muted mb-4">Manage user access, roles, and permissions for the system</p>

                    <!-- User Statistics -->
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-users fa-lg text-primary"></i>
                                    <div class="value text-primary" id="totalUsers">0</div>
                                    <div class="label">Total Users</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-user-check fa-lg text-success"></i>
                                    <div class="value text-success" id="activeUsers">0</div>
                                    <div class="label">Active Users</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-user-clock fa-lg text-warning"></i>
                                    <div class="value text-warning" id="pendingUsers">0</div>
                                    <div class="label">Pending Approval</div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="card stat-card">
                                <div class="card-body">
                                    <i class="fas fa-user-times fa-lg text-danger"></i>
                                    <div class="value text-danger" id="blockedUsers">0</div>
                                    <div class="label">Blocked Users</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Add New User Form -->
                    <div class="card mb-4">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div><i class="fas fa-user-plus me-2"></i>Add New User</div>
                                <button class="btn btn-primary btn-sm" id="toggleAddUserFormBtn">
                                    <i class="fas fa-plus"></i> Add User
                                </button>
                            </div>
                        </div>
                        <div class="card-body" id="addUserForm" style="display: none;">
                            <form id="newUserForm">
                                <div class="row g-3">
                                    <div class="col-md-4">
                                        <label class="form-label">Full Name</label>
                                        <input type="text" class="form-control" name="fullName" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Phone Number</label>
                                        <input type="tel" class="form-control" name="phoneNumber" required
                                            pattern="0[789][0-9]{9}" maxlength="11" minlength="11"
                                            title="Mobile number must be exactly 11 digits and start with 07, 08, or 09"
                                            placeholder="Must start with 07, 08, or 09">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Email (Optional)</label>
                                        <input type="email" class="form-control" name="email">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Role</label>
                                        <select class="form-select" name="role" required>
                                            <option value="">Select Role</option>
                                            <option value="superadmin">Super Admin</option>
                                            <option value="admin">Admin</option>
                                            <option value="management">Management</option>
                                            <option value="supervisor">Supervisor</option>
                                            <option value="finance">Finance</option>//Agency Rep
                                            <option value="agency_rep">Agency Rep</option>
                                            <option value="stylist_only">Field Executive</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Location Assigned</label>
                                        <select class="form-select" name="location">
                                            <option value="all">All Locations</option>
                                            <option value="AKURE">AKURE</option>
                                            <option value="ONDA">ONDA</option>
                                            <option value="ADO-EKITI">ADO-EKITI</option>
                                            <option value="ILORIN">ILORIN</option>
                                            <option value="OSOGBO">OSOGBO</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Status</label>
                                        <select class="form-select" name="status">
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                            <option value="blocked">Blocked</option>
                                        </select>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Username</label>
                                        <input type="text" class="form-control" name="username" required>
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Password</label>
                                        <input type="password" class="form-control" name="password"
                                            placeholder="password minimum 6 characters" required minlength="6">
                                    </div>
                                    <div class="col-md-4">
                                        <label class="form-label">Accessible Fields</label>
                                        <div class="dropdown">
                                            <button class="btn btn-outline-secondary dropdown-toggle w-100"
                                                type="button" id="accessFieldsDropdown" data-bs-toggle="dropdown"
                                                aria-expanded="false">
                                                Select Access Fields
                                            </button>
                                            <div class="dropdown-menu p-2" style="min-width: 250px;">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="dashboard"
                                                        id="access_dashboard" name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_dashboard">Dashboard</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        value="register-stylist" id="access_register_stylist"
                                                        name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_register_stylist">Register Stylist</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        value="braiding-form" id="access_braiding_form"
                                                        name="accessFields">
                                                    <label class="form-check-label" for="access_braiding_form">Braiding
                                                        Form</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="stylists"
                                                        id="access_stylists" name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_stylists">Stylists</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="customers"
                                                        id="access_customers" name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_customers">Customers</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        value="payment-request" id="access_payment_request"
                                                        name="accessFields">
                                                    <label class="form-check-label" for="access_payment_request">Payment
                                                        Request</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="payments"
                                                        id="access_payments" name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_payments">Payments</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox"
                                                        value="user-management" id="access_user_management"
                                                        name="accessFields">
                                                    <label class="form-check-label" for="access_user_management">User
                                                        Management</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" value="settings"
                                                        id="access_settings" name="accessFields">
                                                    <label class="form-check-label"
                                                        for="access_settings">Settings</label>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-text">
                                            Click to open dropdown and check multiple sections. Master admin has access
                                            to all sections.
                                        </div>
                                    </div>
                                    <div class="col-12">
                                        <label class="form-label">Description/Notes</label>
                                        <textarea class="form-control" name="description" rows="2"></textarea>
                                    </div>
                                </div>
                                <div class="mt-3">
                                    <button type="button" class="btn btn-primary" id="addUserBtn">
                                        <i class="fas fa-user-plus"></i> Add User
                                    </button>
                                    <button type="button" class="btn btn-secondary" id="cancelAddUserBtn">
                                        Cancel
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Users Table -->
                    <div class="card">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <div><i class="fas fa-users me-2"></i>System Users</div>
                                <div class="d-flex gap-2">
                                    <button class="btn btn-outline-primary btn-sm" id="refreshUsersBtn">
                                        <i class="fas fa-refresh"></i> Refresh
                                    </button>
                                    <button class="btn btn-primary btn-sm" id="exportUsersBtn">
                                        <i class="fas fa-download"></i> Export
                                    </button>
                                </div>
                            </div>
                            <!-- Search and Filter -->
                            <div class="mt-3">
                                <div class="row g-2">
                                    <div class="col-md-4">
                                        <input type="text" class="form-control" id="userSearch"
                                            placeholder="Search users...">
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="roleFilter">
                                            <option value="">All Roles</option>
                                            <option value="admin">Admin</option>
                                            <option value="manager">Manager</option>
                                            <option value="user">User</option>
                                            <option value="stylist_only">Stylist</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="statusFilter">
                                            <option value="">All Status</option>
                                            <option value="active">Active</option>
                                            <option value="pending">Pending</option>
                                            <option value="blocked">Blocked</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <select class="form-select" id="userlocationFilter"">
                                            <option value="">All Locations</option>
                                            <option value=" all">All Access</option>
                                            <option value="AKURE">Akure</option>
                                            <option value="ONDA">Ondo</option>
                                            <option value="ADO-EKITI">Ado-Ekiti</option>
                                            <option value="ILORIN">Ilorin</option>
                                            <option value="OSOGBO">Osogbo</option>
                                        </select>
                                    </div>
                                    <div class="col-md-2">
                                        <button class="btn btn-outline-secondary w-100" id="clearUserFiltersBtn">
                                            <i class="fas fa-times"></i> Clear
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table table-hover" id="usersTable">
                                    <thead class="table-dark">
                                        <tr>
                                            <th>Name</th>
                                            <th>Phone</th>
                                            <th>Username</th>
                                            <th>Password</th>
                                            <th>Role</th>
                                            <th>Location Access</th>
                                            <th>Status</th>
                                            <th>Access Fields</th>
                                            <th>Created</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        <tr>
                                            <td colspan="10" class="text-center text-muted">Loading users...</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="settings" class="dashboard-section" style="display: none;">
                    <h2 class="section-title">System Settings</h2>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-cog me-2"></i> General Settings
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <label class="form-label">Business Name</label>
                                        <input type="text" class="form-control" value="Market Activation System"
                                            readonly>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Default Currency</label>
                                        <select class="form-select">
                                            <option>Nigerian Naira (₦)</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Time Zone</label>
                                        <select class="form-select">
                                            <option>West Africa Time (WAT)</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <i class="fas fa-database me-2"></i> Data Management
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <button class="btn btn-outline-primary w-100 mb-2">
                                            <i class="fas fa-download"></i> Export Data
                                        </button>
                                        <button class="btn btn-outline-success w-100 mb-2">
                                            <i class="fas fa-sync"></i> Sync with Google Sheets
                                        </button>
                                        <button class="btn btn-outline-warning w-100">
                                            <i class="fas fa-trash-alt"></i> Clear Sample Data
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Change Password Modal -->
    <div class="modal fade" id="changePasswordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Change Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="changePasswordForm">
                        <input type="hidden" id="changePasswordUserKey">
                        <div class="mb-3">
                            <label for="newPasswordInput" class="form-label">New Password *</label>
                            <input type="password" class="form-control" id="newPasswordInput"
                                placeholder="password minimum 6 characters" required minlength="6">
                        </div>
                        <div class="mb-3">
                            <label for="confirmPasswordInput" class="form-label">Confirm Password *</label>
                            <input type="password" class="form-control" id="confirmPasswordInput"
                                placeholder="password minimum 6 characters" required minlength="6">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-primary" id="changePasswordBtn">Update Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Forgot Password Modal -->
    <div class="modal fade" id="forgotPasswordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Reset Password</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="forgotPasswordForm">
                        <div class="mb-3">
                            <label for="resetIdentifierInput" class="form-label">User ID or Phone Number *</label>
                            <input type="text" class="form-control" id="resetIdentifierInput" required
                                placeholder="Enter User ID or Phone Number">
                            <div class="form-text">Enter the User ID or phone number to reset password</div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-warning" id="resetPasswordBtn">Reset Password</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>

    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="app.js"></script>


    <span id="PING_IFRAME_FORM_DETECTION" style="display: none;"></span>

    <!-- Footer -->
    <footer id="mainFooter" class="mt-auto py-2 bg-light w-75 position-fixed bottom-0 end-0"
        style="border-top: 1px solid #dee2e6; font-size: 0.85rem;">
        <style>
            .login-footer {
                width: 100% !important;
                left: 0 !important;
                right: 0 !important;
            }

            .login-footer .d-flex {
                justify-content: flex-end !important;
                align-items: center !important;
            }

            .login-footer span {
                font-size: 0.8rem !important;
                text-align: right !important;
            }

            .login-footer img #comlog {
                height: 2.5em !important;
                width: auto !important;
                margin-left: 0.5em;
            }
        </style>
        <script>
            // Toggle footer width based on login page visibility
            function setFooterWidthForLogin() {
                var loginPage = document.getElementById('loginPage');
                var footer = document.getElementById('mainFooter');
                if (loginPage && footer) {
                    var isLoginVisible = loginPage.style.display !== 'none';
                    if (isLoginVisible) {
                        footer.classList.add('login-footer');
                        footer.classList.remove('w-75', 'end-0');
                    } else {
                        footer.classList.remove('login-footer');
                        footer.classList.add('w-75', 'end-0');
                    }
                }
            }
            // Run on load
            document.addEventListener('DOMContentLoaded', setFooterWidthForLogin);
            // If you have code that toggles loginPage, call setFooterWidthForLogin() after toggling
        </script>
        <div class="container-fluid px-2">
            <div class="d-flex flex-row align-items-center justify-content-center flex-nowrap">
                <span class="text-muted me-2" style="white-space:nowrap;">
                    © 2024 Market Activation System. All rights reserved.<br>
                    <span class="developer-text">Developed by MNG Technology Mind
                        <div class="developer-card">
                            <img src="profile_pic.jpeg" alt="Developer" class="dev-photo">
                            <div class="dev-name">Vijay Pal</div>
                            <div class="dev-role">Data Analyst / Web Developer</div>
                            <div class="dev-company">🏢 MNG Technology Mind</div>
                            <div class="dev-contact">
                                <a href="mailto:mng.ttech@gmail.com" title="Email"><i
                                        class="fas fa-envelope text-warning"></i></a>
                                <a href="tel:+919211978809" title="Phone"><i class="fas fa-phone text-danger"></i></a>
                                <a href="https://www.linkedin.com/in/vijay-pal-970429b0" target="_blank"
                                    title="LinkedIn"><i class="fab fa-linkedin-in text-info"></i></a>
                                <a href="https://www.freelancer.com/u/Vij7210" target="_blank">
                                    <i style="display:inline-block; width:13px; height:13px;">
                                        <svg width="13" height="13" viewBox="0 0 64 64" fill="none">
                                            <polygon points="2,2 24,34 9,34" fill="#29b2fe" />
                                            <polygon points="32,12 62,2 44,29" fill="#29b2fe" />
                                            <polygon points="44,29 62,62 41,28" fill="#6be3f3" />
                                        </svg>
                                    </i>
                                </a>
                            </div>
                            <div class="dev-details">
                                <div class="detail-item"><i class="fas fa-envelope text-warning"></i> <a
                                        href="mailto:mng.ttech@gmail.com">mng.ttech@gmail.com</a></div>
                                <div class="detail-item"><i class="fas fa-phone text-danger"></i> <a
                                        href="tel:+919211978809">+91 92119 78809</a></div>
                                <div class="detail-item">
                                    <i style="display:inline-block; width:13px; height:13px;">
                                        <svg width="13" height="13" viewBox="0 0 64 64" fill="none">
                                            <polygon points="2,2 24,34 9,34" fill="#29b2fe" />
                                            <polygon points="32,12 62,2 44,29" fill="#29b2fe" />
                                            <polygon points="44,29 62,62 41,28" fill="#6be3f3" />
                                        </svg>
                                    </i>
                                    <a href="https://www.freelancer.com/u/Vij7210"
                                        target="_blank">Freelancer.com/u/Vij7210</a>
                                </div>
                                <div class="detail-item"><i class="fab fa-linkedin-in text-info"></i> <a
                                        href="https://www.linkedin.com/in/vijay-pal-970429b0"
                                        target="_blank">linkedin.com/in/vijay-pal-970429b0</a>
                                </div>
                            </div>
                        </div>
                    </span>
                </span>
                <img id="comlog" src="darling_square.jpeg" alt="Company Logo" style="height: 35px; width:auto;">
            </div>
        </div>
    </footer>

    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }

        .dashboard-container {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            height: 100vh;
            box-sizing: border-box;
            /* padding-bottom: 48px !important; */
            overflow: hidden;
        }

        .main-content,
        .content-area {
            min-height: 0;
            height: 100%;
            box-sizing: border-box;
            /* padding-bottom: 48px !important; */
        }

        @media (max-width: 768px) {
            footer img #comlog {
                height: 22px !important;
            }

            footer span {
                font-size: 0.5rem !important;
            }
        }
    </style>
    <script>
        // Sidebar responsive fix: always show sidebar on desktop after resizing from mobile
        window.addEventListener('resize', function () {
            const sidebar = document.querySelector('.sidebar');
            if (!sidebar) return;
            if (window.innerWidth > 768) {
                // Remove mobile-only classes/styles
                sidebar.classList.remove('active');
                sidebar.style.transform = '';
                sidebar.style.display = '';
            }
        });
    </script>
</body>

</body>

</html>
